# -----------------------------------------------------------------------------
# .tmux.conf
# Description: Config file for tmux
# -----------------------------------------------------------------------------
# Location: $HOME/.tmux.conf
# -----------------------------------------------------------------------------

# -----------------------------------------------------------------------------
# => General
# -----------------------------------------------------------------------------
# {{{
# enable 256 color support
set -g default-terminal "screen-256color"

# disable various messages
set -s quiet on

# Increase history limit
set -g history-limit 5000

# increase key combination compatibility
setw -g xterm-keys on
# Disable delay between command sequence
set -sg escape-time 0
# enable vim keybindings
set -g status-keys vi
setw -g mode-keys vi

# Enable utf-8. Only available in tmux < v2.2.
setw -gq utf8 on
set -gq status-utf8 on

# disable mouse
# tmux < v2.1:
if-shell "[[ `tmux -V | cut -d' ' -f2` -lt 2.1 ]]" "setw -g mode-mouse off"
# tmux >= v2.1:
if-shell "[[ `tmux -V | cut -d' ' -f2` -ge 2.1 ]]" "setw -g mouse off"
#}}}

# -----------------------------------------------------------------------------
# => Key Bindings
# -----------------------------------------------------------------------------
# {{{
# Change Prefix to Ctrl-a
unbind C-b
set -g prefix C-a
bind C-a send-prefix

# Configuration file reload.
bind R source-file "$HOME/.tmux.conf" \; display " Configuration reloaded. "

# Smart pane switching with awareness of Vim splits
bind -n C-h run "(tmux display-message -p '#{pane_title}' | grep -iq vim && tmux send-keys C-h) || (tmux select-pane -L || true)"
bind -n C-j run "(tmux display-message -p '#{pane_title}' | grep -iq vim && tmux send-keys C-j) || (tmux select-pane -D || true)"
bind -n C-k run "(tmux display-message -p '#{pane_title}' | grep -iq vim && tmux send-keys C-k) || (tmux select-pane -U || true)"
bind -n C-l run "(tmux display-message -p '#{pane_title}' | grep -iq vim && tmux send-keys C-l) || (tmux select-pane -R || true)"
# Force pane switching when smart switching doesn't work
bind C-h select-pane -L
bind C-j select-pane -D
bind C-k select-pane -U
bind C-l select-pane -R

# Pane splitting
bind | split-window -h -c "#{pane_current_path}"
bind - split-window -v -c "#{pane_current_path}"
# Pane resizing
bind -r H resize-pane -L 5
bind -r J resize-pane -D 5
bind -r K resize-pane -U 5
bind -r L resize-pane -R 5

# maximize current pane
bind + resize-pane -Z
# Toggle pane synchronization
bind S set synchronize-panes

# Change 0 to 10 since start at 1
bind 0 select-window -t :10
# Movement of windows
bind -r < swap-window -t -1
bind -r > swap-window -t +1

# Do not display the original window's name when renaming it
bind , command-prompt -p "(rename-window '#W')" "rename-window '%%'"
# Do the same for sessions.
bind '$' command-prompt -p "(rename-session '#S')" "rename-session '%%'"

# Make f search only in window names (-N), not in titles (-T) or contents (-C).
bind f command-prompt -p "(find-window)" "find-window -N '%%'"

# Make b start copy mode.
bind b copy-mode
# }}}

# -----------------------------------------------------------------------------
# => Display
# -----------------------------------------------------------------------------
# {{{
# start window numbering from 1 instead of 0
set -g base-index 1
# start pane numbering from 1 instead of 0
setw -g pane-base-index 1
# Automatically renumber windows after one is closed
set -g renumber-windows on
# Automatically rename window to reflect current program
setw -g automatic-rename on
# Enable setting of terminal-emulator titles.
set -g set-titles on
set -g set-titles-string "#h #S #I #W"

# Do not monitor window activity
setw -g monitor-activity off
# prevent activity messages
set -g visual-activity off
# Status line
set -g status-interval 10
set -g status-fg colour234
set -g status-bg default
set -g status-left ""
set -g status-right "#[fg=colour176,bold,bg=colour236,bold] %B #[fg=colour146,bold,bg=colour236,bold]%d, #[fg=colour173,bold,bg=colour236,bold]%Y#[fg=default] #[fg=colour234,bold,bg=colour12,bold] %R "
set -g status-right-length 100
# Window list
setw -g window-status-fg colour236
setw -g window-status-bg colour180
setw -g window-status-format "#[fg=colour236,bold,bg=colour180,bold] #I #[fg=colour180,bold,bg=colour236,bold] #W "
# Active window
setw -g window-status-current-fg colour236
setw -g window-status-current-bg colour180
setw -g window-status-current-format "#[fg=colour180,bold,bg=colour236,bold] #I #[fg=colour236,bold,bg=colour180,bold] #W "
# Panes
# set -g pane-active-border-fg colour235
# set -g pane-active-border-bg default

# pane border
set -g pane-border-fg colour236 #inactive pane border
set -g pane-active-border-fg default #base02

# Messages
set -g message-fg colour236
set -g message-bg colour180
# }}}

# vim:foldmethod=marker:foldlevel=0
